#!/bin/sh

# Pre-commit hook to run validation checks
echo "üîç Running pre-commit checks..."

# Check for circular dependencies
echo "üîÑ Checking for circular dependencies..."
pnpm check:circular
if [ $? -ne 0 ]; then
  echo "‚ùå Circular dependencies detected! Please fix them before committing."
  exit 1
fi

# Run tests if they exist and pass quickly
echo "üß™ Running tests..."
pnpm test --run 2>/dev/null
if [ $? -ne 0 ]; then
  echo "‚ö†Ô∏è  Tests failed or not configured. Consider fixing tests."
  # Don't block commit for now since tests might not be fully set up
fi

echo "‚úÖ Pre-commit checks passed!"